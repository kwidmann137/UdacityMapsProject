var viewModel=function(){var e=this;e.searchKeyword=ko.observable(""),e.listHidden=ko.observable(!0),e.listLocations=ko.observableArray([]),e.featuredLocations=ko.observableArray([]),e.listEmpty=ko.observable(!1),e.toggleList=function(){e.listHidden()?e.listHidden(!1):e.listHidden(!0)},e.search=function(){""!==e.searchKeyword()&&(e.listLocations().forEach(function(e,a){mapClearMarker(e.marker())}),e.listLocations.removeAll(),mapSearch(e.searchKeyword()),e.searchKeyword(""))},e.addSearchResult=function(t,o,s){var r=new a(t,o,s,"search");e.listLocations.push(r)};var a=function(e,a,t,o){var s="undefined"!=typeof a.photos?a.photos[0].getUrl({maxWidth:150,maxHeight:150}):"";this.googleResult=ko.observable(a),this.address=ko.observable(a.formatted_address),this.location=ko.observable(a.geometry),this.name=ko.observable(a.name),this.photoURL=ko.observable(s),this.id=ko.observable(a.place_id),this.rating=ko.observable(a.rating),this.types=ko.observableArray(a.types),this.marker=ko.observable(t),this.match=ko.observable(!0),this.type=ko.observable(o),this.expanded=ko.observable(!1),this.expandDetailsText=ko.observable("See More Details..."),null!==e?(this.yelpData=ko.observable(e),this.hasYelpDetails=ko.observable(!0),this.yelpNumberOfReviews=ko.observable(e.review_count),this.yelpReviewSnippet=ko.observable(e.snippet_text),this.yelpURL=ko.observable(e.url),this.yelpRating=ko.observable(e.rating)):(this.yelpData=ko.observable(e),this.hasYelpDetails=ko.observable(!1))};e.addFeaturedLocation=function(t,o,s){var r=new a(t,o,s,"featured");e.featuredLocations.push(r),e.listLocations.push(r)},e.filterList=function(){e.listLocations().forEach(function(a,t){a.match(!1),a.name().toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&(console.log("name matched"),a.match(!0)),a.types().forEach(function(a,t){a.toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&this.match(!0)},a),a.address().toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&a.match(!0),a.match()===!1?mapClearMarker(a.marker()):mapSetMarker(a.marker())}),e.noResults(),e.searchKeyword("")},e.restoreFeatured=function(){e.listLocations().forEach(function(e,a){mapClearMarker(e.marker())}),e.listLocations.removeAll(),e.listLocations(e.featuredLocations().slice(0)),e.listLocations().forEach(function(e,a){e.match(!0),mapSetMarker(e.marker())})},e.animateMarker=function(){mapAnimateMarker(this.marker(),this.type()),mapOpenInfoWindow(this.googleResult(),this.yelpData(),this.marker())},e.expandDetails=function(){this.expanded()?this.expanded(!1):this.expanded(!0),"See More Details..."==this.expandDetailsText()?this.expandDetailsText("Hide Details..."):this.expandDetailsText("See More Details...")},e.noResults=function(){e.listEmpty(!0),e.listLocations().forEach(function(a,t){a.match()===!0&&e.listEmpty(!1)})},e.openInfoWindow=function(){console.log()}},myVM=new viewModel;ko.applyBindings(myVM);