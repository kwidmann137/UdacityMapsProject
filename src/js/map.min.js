function initMap(){"object"!=typeof google&&"object"!=typeof google.maps&&alter("There was an error loading the map, try refreshing the page!"),window.onload=function(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:29.494119,lng:-98.705823},zoom:12}),bounds=new google.maps.LatLngBounds,defaultFeaturedIcon="./images/featuredIcon.png",selectedFeaturedIcon="./images/selectedIcon.png",defaultIcon="./images/defaultIcon.png",selectedIcon="./images/selectedIcon.png",largeInfoWindow=new google.maps.InfoWindow,createFeaturedLocation("Golf Club of Texas, San Antonio, TX"),createFeaturedLocation("Lone Star Crossfit, San Antonio, TX"),createFeaturedLocation("Top Golf, San Antonio, TX"),createFeaturedLocation("K1 Speed, San Antonio, TX"),createFeaturedLocation("Mission San Jose Church, San Antonio, TX"),createFeaturedLocation("The Alamo, San Antonio, TX"),createFeaturedLocation("Government Canyon, San Antonio, TX")}}function createFeaturedLocation(e){function o(e,o){if(o==google.maps.places.PlacesServiceStatus.OK)for(var a=0;a<e.length;a++){var n=new google.maps.Marker({map:map,position:e[a].geometry.location,name:e[a].name,animation:google.maps.Animation.DROP,id:e[a].place_id,icon:defaultFeaturedIcon});yelpSearch("San Antonio",e[a].name,e[a],n,"featured"),bounds.extend(e[a].geometry.location)}else alert("There was an error creating a featured location.  Please try again.");map.fitBounds(bounds)}var a={query:e,bounds:map.getBounds()},n=new google.maps.places.PlacesService(map);n.textSearch(a,o)}function mapSearch(e){function o(e,o){if(o==google.maps.places.PlacesServiceStatus.OK)for(var a=0;a<e.length;a++){var n=new google.maps.Marker({map:map,position:e[a].geometry.location,name:e[a].name,animation:google.maps.Animation.DROP,id:e[a].place_id,icon:defaultIcon});yelpSearch("San Antonio",e[a].name,e[a],n,"search"),bounds.extend(e[a].geometry.location)}else alert("There was an error searching Google Maps.  Please try again.");map.fitBounds(bounds)}var a={query:e,bounds:map.getBounds()},n=new google.maps.places.PlacesService(map);n.textSearch(a,o)}function mapClearMarker(e){e.setMap(null)}function mapSetMarker(e){e.setMap(map),bounds.extend(e.position),map.fitBounds(bounds)}function mapAnimateMarker(e,o){"search"==o?(e.setAnimation(google.maps.Animation.BOUNCE),e.setIcon(selectedIcon),setTimeout(function(){e.setAnimation(null),e.setIcon(defaultIcon)},3e3)):"featured"==o&&(e.setAnimation(google.maps.Animation.BOUNCE),e.setIcon(selectedFeaturedIcon),setTimeout(function(){e.setAnimation(null),e.setIcon(defaultFeaturedIcon)},3e3))}function populateInfoWindow(e,o,a,n){if(o.marker!=e)if(null!==a){o.marker=e;var t=infoWindowContentWithYelp.replace("%name%",n.name),i="undefined"!=typeof n.photos?n.photos[0].getUrl({maxWidth:150,maxHeight:150}):"";t=t.replace("%src%",i);var s=null!==a?a.snippet_text:"Not Available...";t=t.replace("%yelpReview%",s),t=t.replace("%address%",n.formatted_address),t=t.replace("%yelpRating%",a.rating),t=t.replace("%numberOfYelpReviews%",a.review_count),t=t.replace("%yelpUrl%",a.url),o.setContent(t),o.open(map,e),o.addListener("closeclick",function(){this.marker=null},o)}else{o.marker=e;var t=infoWindowContentWithoutYelp.replace("%name%",n.name);t=t.replace("%address%",n.formatted_address);var i="undefined"!=typeof n.photos?n.photos[0].getUrl({maxWidth:150,maxHeight:150}):"";t=t.replace("%src%",i),o.setContent(t),o.open(map,e),o.addListener("closeclick",function(){this.marker=null},o)}}function mapAddCompletedFeaturedLocation(e,o,a){null!==e&&e.name!=o.name&&o.formatted_address.toLowerCase().search(e.location.address[0].toLowerCase())<0&&(e=null),a.addListener("click",function(){mapAnimateMarker(this,"featured"),populateInfoWindow(this,largeInfoWindow,e,o)}),myVM.addFeaturedLocation(e,o,a)}function mapAddCompletedSearchLocation(e,o,a){null!==e&&"undefined"!=typeof e&&e.name!=o.name&&o.formatted_address.toLowerCase().search(e.location.address[0].toLowerCase())<0&&(e=null),a.addListener("click",function(){mapAnimateMarker(this,"search"),populateInfoWindow(this,largeInfoWindow,e,o)}),myVM.addSearchResult(e,o,a)}var map,bounds,defaultFeaturedIcon,selectedFeaturedIcon,defaultIcon,selectedIcon,largeInfoWindow,infoWindowContentWithYelp='<div class="row infoWindowRow"><h3>%name%</h3></div><div class="row infoWindowRow"><div class="col-xs-7"><p>%address%</p></div><div class="col-xs-5"><div class="row infoWindowRow"><p>Yelp Rating: %yelpRating%</p></div><div class="row infoWindowRow"><p>Yelp Reviews: %numberOfYelpReviews%</p></div><div class="row infoWindowRow"><a href="%yelpUrl%">View Yelp Page</a></div></div></div><div class="row infoWindowRow"><p class="col-xs-7">Yelp Review: %yelpReview% </p><img class="col-xs-5 img-responsive" src="%src%"></div>',infoWindowContentWithoutYelp='<div class="row infoWindowRow"><h3>%name%</h3></div><div class="row infoWindowRow"><div class="col-xs-7"><p>%address%</p></div><img class="col-xs-5 img-responsive" src="%src%"></div>';